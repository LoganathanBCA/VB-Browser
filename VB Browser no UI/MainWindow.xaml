<Window x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="VB Browser" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow" ResizeMode="CanResize"
        Background="{DynamicResource BGBrush}">

    <Window.Resources>
        <DataTemplate x:Key="TabHeaderTemplate">
            <StackPanel Orientation="Horizontal" Margin="5 0">
                <TextBlock Text="{Binding Header}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <Button Content="âœ–" Width="20" Height="20" Padding="0"
                        Click="CloseTab_Click" Tag="{Binding RelativeSource={RelativeSource AncestorType=TabItem}}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <StackPanel Grid.Column="0" Background="{DynamicResource BGBrush}" Margin="5">
            <TextBlock Text="Bookmarks" FontWeight="Bold" FontSize="14"
                       Foreground="{DynamicResource FGBrush}" Margin="0 0 0 10"/>
            <ListBox x:Name="BookmarkList" Height="120"
                     Background="{DynamicResource BGBrush}" Foreground="{DynamicResource FGBrush}" BorderThickness="0"/>
            <StackPanel Orientation="Horizontal" Margin="0 5 0 5">
                <Button Content="Save" Click="SaveBookmark_Click" Margin="0 5 0 0"/>
                <Button Content="Remove" Click="RemoveBookmark_Click" Margin="0 5 0 0"/>
            </StackPanel>
            <Button Content="Save All Bookmarks" Click="SaveBookmarksToFile_Click" Height="30"/>

            <TextBlock Text="History" FontWeight="Bold" FontSize="14"
                       Foreground="{DynamicResource FGBrush}" Margin="0 15 0 10"/>
            <ListBox x:Name="HistoryPanel" Background="{DynamicResource BGBrush}" Foreground="{DynamicResource FGBrush}"
                     BorderThickness="0"/>
            <Button Content="Clear History" Click="ClearHistory_Click" Margin="0 5"/>
        </StackPanel>

        <!-- Browser + Toolbar -->
        <DockPanel Grid.Column="1" Margin="5" LastChildFill="True">
            <Border Background="{DynamicResource BGBrush}" Height="40" DockPanel.Dock="Top" Margin="0 0 0 5">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" Content="â—€" Width="35" Margin="3" Click="Back_Click"/>
                    <Button Grid.Column="1" Content="â–¶" Width="35" Margin="3" Click="Forward_Click"/>
                    <TextBox Grid.Column="2" x:Name="AddressBar" Margin="5,3"
                             VerticalAlignment="Center" Background="{DynamicResource BGBrush}"
                             Foreground="{DynamicResource FGBrush}" BorderBrush="{DynamicResource FGBrush}" Height="34"/>
                    <Button Grid.Column="3" Content="Go" Width="40" Margin="3" Click="Go_Click"/>
                    <Button Grid.Column="4" Content="New Tab" Margin="3" Click="NewTab_Click"/>
                    <ToggleButton Grid.Column="5" x:Name="ThemeToggle" Content="ðŸŒ™" Width="40" Margin="3"
                                  Checked="ThemeToggle_Checked" Unchecked="ThemeToggle_Unchecked"/>
                </Grid>
            </Border>

            <!-- Tabs -->
            <TabControl x:Name="BrowserTabs"
                        Background="{DynamicResource BGBrush}"
                        Foreground="{DynamicResource FGBrush}"
                        BorderThickness="0"
                        ItemTemplate="{StaticResource TabHeaderTemplate}"/>
        </DockPanel>
    </Grid>
</Window>
